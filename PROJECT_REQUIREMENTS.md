# é¡¹ç›®éœ€æ±‚è®¾è®¡æ–‡æ¡£ - æ¨¡æ¿é©±åŠ¨çš„æ•°æ§ç¨‹åºç”Ÿæˆå™¨

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

### é¡¹ç›®åç§°
æ¨¡æ¿é©±åŠ¨çš„æ•°æ§ç¨‹åºç”Ÿæˆå™¨ (Template-Driven CNC Program Generator)

### é¡¹ç›®ç›®æ ‡
å¼€å‘ä¸€ä¸ªåŸºäºæ¨¡æ¿åŒ…çš„æ•°æ§ç¨‹åºç”Ÿæˆç³»ç»Ÿï¼Œæ”¯æŒç”¨æˆ·é€šè¿‡å¯è§†åŒ–ç•Œé¢ç®¡ç†æ¨¡æ¿åŒ…ã€é…ç½®å‚æ•°ï¼Œå¹¶æ¸²æŸ“ç”Ÿæˆæ ‡å‡†Gä»£ç æˆ–å…¶ä»–æ ¼å¼çš„æ•°æ§ç¨‹åºã€‚

### æ ¸å¿ƒä»·å€¼
- **æ¨¡æ¿é©±åŠ¨**ï¼šç”¨æˆ·å¯è‡ªå®šä¹‰æ¨¡æ¿åŒ…ï¼Œæ— éœ€ç¼–ç¨‹çŸ¥è¯†
- **å‚æ•°ç®¡ç†**ï¼šå¼ºå¤§çš„å‚æ•°ç³»ç»Ÿï¼Œæ”¯æŒéªŒè¯ã€è®¡ç®—å’Œé¢„è®¾
- **å®æ—¶é¢„è§ˆ**ï¼šæ‰€è§å³æ‰€å¾—çš„æ¸²æŸ“é¢„è§ˆ
- **å¤šæ ¼å¼è¾“å‡º**ï¼šæ”¯æŒå¤šç§æ•°æ§ç¨‹åºæ ¼å¼è¾“å‡º

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ ˆ
- **å‰ç«¯**ï¼šVue.js 3 + TypeScript + Pinia
- **åç«¯**ï¼šPython Flask + Jinja2 + PyYAML
- **ç¼–è¾‘å™¨**ï¼šMonaco Editor (VS CodeåŒæ¬¾)
- **é…ç½®æ ¼å¼**ï¼šYAML
- **æ¨¡æ¿å¼•æ“**ï¼šJinja2

### ç³»ç»Ÿåˆ†å±‚
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‰ç«¯å±‚ (Vue.js)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              APIå±‚ (Flask REST)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              ä¸šåŠ¡é€»è¾‘å±‚                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ•°æ®è®¿é—®å±‚                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              æ–‡ä»¶ç³»ç»Ÿå±‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¦ æ¨¡å—è®¾è®¡

### 1. æ¨¡æ¿ç®¡ç†æ¨¡å— (TemplateManager)

#### èŒè´£è¾¹ç•Œ
- âœ… æ¨¡æ¿åŒ…çš„å¯¼å…¥ã€å¯¼å‡ºã€å®‰è£…ã€å¸è½½
- âœ… æ¨¡æ¿åŒ…ä¿¡æ¯ç®¡ç†ï¼ˆç‰ˆæœ¬ã€ä¾èµ–ã€åˆ†ç±»ï¼‰
- âœ… æ¨¡æ¿åŒ…åˆ—è¡¨å±•ç¤ºå’Œæœç´¢
- âŒ ä¸è´Ÿè´£æ¨¡æ¿å†…å®¹ç¼–è¾‘ï¼ˆç”±ç¼–è¾‘å™¨æ¨¡å—è´Ÿè´£ï¼‰
- âŒ ä¸è´Ÿè´£å‚æ•°éªŒè¯ï¼ˆç”±å‚æ•°ç®¡ç†æ¨¡å—è´Ÿè´£ï¼‰

#### æ ¸å¿ƒåŠŸèƒ½
1. **æ¨¡æ¿åŒ…æ‰«æ**ï¼šè‡ªåŠ¨æ‰«æpackagesç›®å½•ä¸‹çš„æ‰€æœ‰æ¨¡æ¿åŒ…
2. **æ¨¡æ¿åŒ…éªŒè¯**ï¼šéªŒè¯package.yamlçš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§
3. **æ¨¡æ¿åŒ…å¯¼å…¥**ï¼šæ”¯æŒzipæ ¼å¼çš„æ¨¡æ¿åŒ…å¯¼å…¥
4. **æ¨¡æ¿åŒ…å¯¼å‡º**ï¼šå°†æ¨¡æ¿åŒ…æ‰“åŒ…ä¸ºzipæ–‡ä»¶
5. **ä¾èµ–ç®¡ç†**ï¼šæ£€æŸ¥å’Œç®¡ç†æ¨¡æ¿åŒ…ä¾èµ–å…³ç³»

#### æ•°æ®ç»“æ„
```python
class TemplatePackage:
    path: str              # æ¨¡æ¿åŒ…è·¯å¾„
    config: dict           # YAMLé…ç½®å†…å®¹
    name: str              # åŒ…å
    display_name: str      # æ˜¾ç¤ºå
    version: str           # ç‰ˆæœ¬å·
    category: str          # åˆ†ç±»
    tags: List[str]        # æ ‡ç­¾åˆ—è¡¨
    author: str            # ä½œè€…
    description: str       # æè¿°
```

#### APIæ¥å£
```
GET    /api/templates                    # è·å–æ¨¡æ¿åŒ…åˆ—è¡¨
GET    /api/templates/{id}               # è·å–æ¨¡æ¿åŒ…è¯¦æƒ…
POST   /api/templates/import             # å¯¼å…¥æ¨¡æ¿åŒ…
GET    /api/templates/{id}/export        # å¯¼å‡ºæ¨¡æ¿åŒ…
DELETE /api/templates/{id}               # åˆ é™¤æ¨¡æ¿åŒ…
```

### 2. å‚æ•°ç®¡ç†æ¨¡å— (ParameterManager)

#### èŒè´£è¾¹ç•Œ
- âœ… å‚æ•°å®šä¹‰çš„è§£æå’Œç®¡ç†
- âœ… å‚æ•°å€¼çš„éªŒè¯å’Œç±»å‹æ£€æŸ¥
- âœ… å‚æ•°é¢„è®¾çš„ç®¡ç†å’Œåº”ç”¨
- âœ… æ´¾ç”Ÿå‚æ•°çš„è®¡ç®—
- âŒ ä¸è´Ÿè´£å‚æ•°è¾“å…¥ç•Œé¢ï¼ˆç”±å‰ç«¯ç»„ä»¶è´Ÿè´£ï¼‰
- âŒ ä¸è´Ÿè´£å‚æ•°å­˜å‚¨ï¼ˆç”±æ–‡ä»¶ç®¡ç†æ¨¡å—è´Ÿè´£ï¼‰

#### æ”¯æŒçš„å‚æ•°ç±»å‹
```yaml
åŸºç¡€ç±»å‹:
  - string: å­—ç¬¦ä¸²
  - number: æ•°å­—ï¼ˆæ•´æ•°/æµ®ç‚¹æ•°ï¼‰
  - boolean: å¸ƒå°”å€¼
  - array: æ•°ç»„
  - object: å¯¹è±¡

æ‰©å±•ç±»å‹:
  - length: é•¿åº¦ï¼ˆå¸¦å•ä½mm/inchï¼‰
  - angle: è§’åº¦ï¼ˆåº¦/å¼§åº¦ï¼‰
  - speed: é€Ÿåº¦ï¼ˆrpm/mm/minï¼‰
  - coordinate: åæ ‡ï¼ˆX/Y/Zï¼‰
  - tool: åˆ€å…·å‚æ•°
  - material: ææ–™å‚æ•°
```

#### å‚æ•°éªŒè¯è§„åˆ™
```yaml
validation:
  type_check: true        # ç±»å‹æ£€æŸ¥
  range_check: true       # èŒƒå›´æ£€æŸ¥
  required_check: true    # å¿…å¡«æ£€æŸ¥
  custom_rules: []        # è‡ªå®šä¹‰éªŒè¯è§„åˆ™
```

#### APIæ¥å£
```
GET    /api/templates/{id}/parameters    # è·å–å‚æ•°å®šä¹‰
POST   /api/templates/{id}/validate      # éªŒè¯å‚æ•°å€¼
GET    /api/parameters/presets           # è·å–å‚æ•°é¢„è®¾
POST   /api/parameters/presets           # ä¿å­˜å‚æ•°é¢„è®¾
```

### 3. ç¼–è¾‘å™¨æ¨¡å— (EditorManager)

#### èŒè´£è¾¹ç•Œ
- âœ… æ¨¡æ¿æ–‡ä»¶çš„ç¼–è¾‘å’Œè¯­æ³•é«˜äº®
- âœ… YAMLé…ç½®æ–‡ä»¶çš„å¯è§†åŒ–å’Œä»£ç ç¼–è¾‘
- âœ… å®æ—¶é¢„è§ˆå’Œé”™è¯¯æ£€æŸ¥
- âœ… æ–‡ä»¶çš„æ–°å»ºã€ä¿å­˜ã€åˆ é™¤
- âŒ ä¸è´Ÿè´£æ¨¡æ¿æ¸²æŸ“ï¼ˆç”±æ¸²æŸ“å™¨æ¨¡å—è´Ÿè´£ï¼‰
- âŒ ä¸è´Ÿè´£æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ˆç”±æ–‡ä»¶ç®¡ç†æ¨¡å—è´Ÿè´£ï¼‰

#### ç¼–è¾‘å™¨åŠŸèƒ½
1. **æ¨¡æ¿ç¼–è¾‘å™¨**
   - Monaco Editoré›†æˆ
   - Jinja2è¯­æ³•é«˜äº®
   - æ™ºèƒ½æç¤ºå’Œè‡ªåŠ¨è¡¥å…¨
   - ä»£ç æŠ˜å å’Œè¿·ä½ åœ°å›¾
   - å¤šæ ‡ç­¾é¡µæ”¯æŒ

2. **YAMLé…ç½®ç¼–è¾‘å™¨**
   - åŒæ¨¡å¼ç¼–è¾‘ï¼šå¯è§†åŒ–è¡¨å• + YAMLä»£ç 
   - å®æ—¶è¯­æ³•éªŒè¯
   - ç»“æ„åŒ–ç¼–è¾‘
   - å‚æ•°ç±»å‹é€‰æ‹©å™¨

#### æ”¯æŒçš„æ–‡ä»¶ç±»å‹
```
æ¨¡æ¿æ–‡ä»¶: .j2 (Jinja2æ¨¡æ¿)
é…ç½®æ–‡ä»¶: .yaml (YAMLé…ç½®)
æ–‡æ¡£æ–‡ä»¶: .md (Markdown)
```

#### APIæ¥å£
```
GET    /api/templates/{id}/files         # è·å–æ–‡ä»¶åˆ—è¡¨
GET    /api/templates/{id}/files/{path}  # è·å–æ–‡ä»¶å†…å®¹
PUT    /api/templates/{id}/files/{path}  # ä¿å­˜æ–‡ä»¶å†…å®¹
POST   /api/templates/{id}/files         # åˆ›å»ºæ–°æ–‡ä»¶
DELETE /api/templates/{id}/files/{path}  # åˆ é™¤æ–‡ä»¶
```

### 4. æ–‡ä»¶ç®¡ç†æ¨¡å— (FileManager)

#### èŒè´£è¾¹ç•Œ
- âœ… æ¨¡æ¿åŒ…æ–‡ä»¶çš„å­˜å‚¨å’Œç»„ç»‡
- âœ… å¯¼å‡ºæ–‡ä»¶çš„ç®¡ç†
- âœ… å¤‡ä»½å’Œæ¢å¤åŠŸèƒ½
- âœ… æ–‡ä»¶ä¸Šä¼ å’Œä¸‹è½½
- âŒ ä¸è´Ÿè´£æ–‡ä»¶å†…å®¹è§£æï¼ˆç”±å¯¹åº”æ¨¡å—è´Ÿè´£ï¼‰
- âŒ ä¸è´Ÿè´£æ–‡ä»¶æƒé™ç®¡ç†ï¼ˆç³»ç»Ÿçº§ï¼‰

#### ç›®å½•ç»“æ„
```
workspace/
â”œâ”€â”€ packages/              # æ¨¡æ¿åŒ…ç›®å½•
â”‚   â”œâ”€â”€ package1/
â”‚   â”‚   â”œâ”€â”€ package.yaml
â”‚   â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â””â”€â”€ docs/
â”‚   â””â”€â”€ package2/
â”œâ”€â”€ exports/               # å¯¼å‡ºæ–‡ä»¶ç›®å½•
â”œâ”€â”€ backups/               # å¤‡ä»½ç›®å½•
â”œâ”€â”€ temp/                  # ä¸´æ—¶æ–‡ä»¶ç›®å½•
â””â”€â”€ config/                # ç³»ç»Ÿé…ç½®ç›®å½•
```

#### æ–‡ä»¶æ“ä½œ
- æ–‡ä»¶çš„åˆ›å»ºã€è¯»å–ã€æ›´æ–°ã€åˆ é™¤
- ç›®å½•çš„åˆ›å»ºå’Œéå†
- æ–‡ä»¶å¤åˆ¶å’Œç§»åŠ¨
- æ–‡ä»¶å‹ç¼©å’Œè§£å‹

#### APIæ¥å£
```
GET    /api/files                        # è·å–æ–‡ä»¶åˆ—è¡¨
POST   /api/files/upload                 # ä¸Šä¼ æ–‡ä»¶
GET    /api/files/{path}/download        # ä¸‹è½½æ–‡ä»¶
DELETE /api/files/{path}                 # åˆ é™¤æ–‡ä»¶
POST   /api/files/backup                 # åˆ›å»ºå¤‡ä»½
GET    /api/files/backup/{id}/restore    # æ¢å¤å¤‡ä»½
```

### 5. æ¨¡æ¿æ¸²æŸ“æ¨¡å— (RenderEngine)

#### èŒè´£è¾¹ç•Œ
- âœ… Jinja2æ¨¡æ¿çš„è§£æå’Œæ¸²æŸ“
- âœ… å¤šæ–‡ä»¶æ‰¹é‡æ¸²æŸ“
- âœ… å®æ—¶é¢„è§ˆæ¸²æŸ“
- âœ… æ–‡ä»¶åç”Ÿæˆ
- âŒ ä¸è´Ÿè´£å‚æ•°éªŒè¯ï¼ˆæ¸²æŸ“å‰å·²å®Œæˆï¼‰
- âŒ ä¸è´Ÿè´£æ–‡ä»¶ä¿å­˜ï¼ˆç”±æ–‡ä»¶ç®¡ç†æ¨¡å—è´Ÿè´£ï¼‰

#### æ¸²æŸ“åŠŸèƒ½
1. **å•æ–‡ä»¶æ¸²æŸ“**ï¼šæ¸²æŸ“æŒ‡å®šçš„Jinja2æ¨¡æ¿
2. **æ‰¹é‡æ¸²æŸ“**ï¼šæ ¹æ®è¾“å‡ºé…ç½®æ¸²æŸ“å¤šä¸ªæ–‡ä»¶
3. **å®æ—¶é¢„è§ˆ**ï¼šå‚æ•°å˜åŒ–æ—¶çš„å¢é‡æ¸²æŸ“
4. **é”™è¯¯å¤„ç†**ï¼šæ¨¡æ¿è¯­æ³•é”™è¯¯çš„æ•è·å’ŒæŠ¥å‘Š

#### Jinja2æ‰©å±•
```python
# è‡ªå®šä¹‰è¿‡æ»¤å™¨
filters:
  - round: å››èˆäº”å…¥
  - format: æ ¼å¼åŒ–
  - unit: å•ä½è½¬æ¢
  - safe: å®‰å…¨è½¬ä¹‰

# è‡ªå®šä¹‰å‡½æ•°
functions:
  - sin: æ­£å¼¦å‡½æ•°
  - cos: ä½™å¼¦å‡½æ•°
  - sqrt: å¹³æ–¹æ ¹
  - abs: ç»å¯¹å€¼
```

#### APIæ¥å£
```
POST   /api/templates/{id}/render        # æ¸²æŸ“æ¨¡æ¿åŒ…
GET    /api/templates/{id}/preview       # å®æ—¶é¢„è§ˆ
POST   /api/render/single                # å•æ–‡ä»¶æ¸²æŸ“
```

## ğŸ“„ æ¨¡æ¿åŒ…è§„èŒƒ

### æ¨¡æ¿åŒ…ç»“æ„
```
template_package/
â”œâ”€â”€ package.yaml           # å”¯ä¸€é…ç½®æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ templates/             # æ¨¡æ¿æ–‡ä»¶ç›®å½•ï¼ˆå¿…éœ€ï¼‰
â”‚   â”œâ”€â”€ main.j2           # ä¸»æ¨¡æ¿æ–‡ä»¶
â”‚   â”œâ”€â”€ sub_template.j2   # å­æ¨¡æ¿æ–‡ä»¶
â”‚   â””â”€â”€ macros.j2         # å®å®šä¹‰æ–‡ä»¶
â”œâ”€â”€ presets.json          # å‚æ•°é¢„è®¾ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ docs/                 # æ–‡æ¡£ç›®å½•ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ README.md
â””â”€â”€ assets/               # èµ„æºæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ icon.png
```

### package.yaml é…ç½®è§„èŒƒ

#### åŸºæœ¬ä¿¡æ¯é…ç½®
```yaml
package:
  name: string              # åŒ…åï¼ˆå¿…éœ€ï¼Œè‹±æ–‡ï¼Œå”¯ä¸€ï¼‰
  displayName: string       # æ˜¾ç¤ºåï¼ˆå¿…éœ€ï¼Œæ”¯æŒä¸­æ–‡ï¼‰
  version: string           # ç‰ˆæœ¬å·ï¼ˆå¿…éœ€ï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰
  description: string       # æè¿°ï¼ˆå¿…éœ€ï¼‰
  category: string          # åˆ†ç±»ï¼ˆå¿…éœ€ï¼‰
  tags: list[string]        # æ ‡ç­¾åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
  author: string            # ä½œè€…ï¼ˆå¯é€‰ï¼‰
  icon: string              # å›¾æ ‡ï¼ˆå¯é€‰ï¼Œemojiæˆ–æ–‡ä»¶è·¯å¾„ï¼‰
  color: string             # ä¸»é¢˜è‰²ï¼ˆå¯é€‰ï¼Œåå…­è¿›åˆ¶ï¼‰
  language: string           # è¯­è¨€ï¼ˆå¯é€‰ï¼Œé»˜è®¤zh-CNï¼‰
```

#### ä¾èµ–é…ç½®
```yaml
dependencies: list[string]   # ä¾èµ–çš„æ¨¡æ¿åŒ…åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
```

#### æ¨¡æ¿é…ç½®
```yaml
templates:
  main: string               # ä¸»æ¨¡æ¿æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
  # å…¶ä»–æ¨¡æ¿æ–‡ä»¶é€šè¿‡outputsé…ç½®å¼•ç”¨
```

#### å˜é‡é…ç½®
```yaml
variables:
  groups:
    group_name:
      name: string           # ç»„æ˜¾ç¤ºåï¼ˆå¿…éœ€ï¼‰
      icon: string           # ç»„å›¾æ ‡ï¼ˆå¯é€‰ï¼‰
      description: string    # ç»„æè¿°ï¼ˆå¯é€‰ï¼‰
      parameters:
        param_name:
          type: string        # å‚æ•°ç±»å‹ï¼ˆå¿…éœ€ï¼‰
          label: string        # å‚æ•°æ ‡ç­¾ï¼ˆå¿…éœ€ï¼‰
          description: string  # å‚æ•°æè¿°ï¼ˆå¯é€‰ï¼‰
          default: any         # é»˜è®¤å€¼ï¼ˆå¯é€‰ï¼‰
          required: boolean    # æ˜¯å¦å¿…å¡«ï¼ˆå¯é€‰ï¼Œé»˜è®¤falseï¼‰
          unit: string         # å•ä½ï¼ˆå¯é€‰ï¼‰
          range: list[any]     # å–å€¼èŒƒå›´ï¼ˆå¯é€‰ï¼‰
          options: list[any]   # é€‰é¡¹åˆ—è¡¨ï¼ˆselectç±»å‹å¿…éœ€ï¼‰
          validation: dict     # éªŒè¯è§„åˆ™ï¼ˆå¯é€‰ï¼‰
```

#### è¾“å‡ºé…ç½®
```yaml
outputs:
  default_format: string     # é»˜è®¤è¾“å‡ºæ ¼å¼ï¼ˆå¿…éœ€ï¼‰
  supported_formats: list[string]  # æ”¯æŒçš„æ ¼å¼ï¼ˆå¿…éœ€ï¼‰
  files:
    output_name:
      template: string        # æ¨¡æ¿æ–‡ä»¶è·¯å¾„ï¼ˆå¿…éœ€ï¼‰
      filename_pattern: string # æ–‡ä»¶åæ¨¡å¼ï¼ˆå¿…éœ€ï¼Œæ”¯æŒå˜é‡ï¼‰
      extension: string      # æ–‡ä»¶åç¼€ï¼ˆå¿…éœ€ï¼‰
      description: string    # æè¿°ï¼ˆå¿…éœ€ï¼‰
      enabled: boolean        # æ˜¯å¦å¯ç”¨ï¼ˆå¯é€‰ï¼Œé»˜è®¤trueï¼‰
      is_default: boolean    # æ˜¯å¦é»˜è®¤è¾“å‡ºï¼ˆå¯é€‰ï¼Œé»˜è®¤falseï¼‰
```

#### é¢„è®¾é…ç½®
```yaml
presets:
  preset_name:
    description: string      # é¢„è®¾æè¿°ï¼ˆå¿…éœ€ï¼‰
    parameters: dict         # å‚æ•°å€¼ï¼ˆå¿…éœ€ï¼‰
```

#### éªŒè¯é…ç½®
```yaml
validation:
  rules:
    rule_name:
      condition: string      # éªŒè¯æ¡ä»¶ï¼ˆå¿…éœ€ï¼‰
      message: string       # é”™è¯¯æ¶ˆæ¯ï¼ˆå¿…éœ€ï¼‰
      level: string          # çº§åˆ«ï¼šerror/warning/infoï¼ˆå¿…éœ€ï¼‰
```

## ğŸ¨ ç”¨æˆ·ç•Œé¢è®¾è®¡

### ä¸»ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        é¡¶éƒ¨å·¥å…·æ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·¦ä¾§é¢æ¿        â”‚              ä¸­é—´å·¥ä½œåŒº              â”‚  å³ä¾§é¢æ¿  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚æ¨¡æ¿åŒ…åˆ—è¡¨ â”‚    â”‚  â”‚        ç¼–è¾‘å™¨/é¢„è§ˆåŒº         â”‚  â”‚  â”‚å‚æ•°é¢æ¿â”‚ â”‚
â”‚  â”‚          â”‚    â”‚  â”‚                             â”‚  â”‚  â”‚        â”‚ â”‚
â”‚  â”‚ğŸ”„è½¦é“£å¤åˆ â”‚    â”‚  â”‚  G00 X{{start_x}}            â”‚  â”‚  â”‚å·¥ä»¶å‚æ•°â”‚ â”‚
â”‚  â”‚ğŸ”§é“£å‰Šä¸“ç”¨ â”‚    â”‚  â”‚  G01 Z{{depth}} F{{feed}}    â”‚  â”‚  â”‚åˆ€å…·å‚æ•°â”‚ â”‚
â”‚  â”‚ğŸ“¦è½¦å‰ŠåŸºç¡€ â”‚    â”‚  â”‚  {% for p in points %}        â”‚  â”‚  â”‚å·¥è‰ºå‚æ•°â”‚ â”‚
â”‚  â”‚          â”‚    â”‚  â”‚    G01 X{{p.x}} Y{{p.y}}     â”‚  â”‚  â”‚        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚  {% endfor %}                â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                 â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                                 â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚æ–‡ä»¶æ ‘    â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚è¾“å‡ºé¢æ¿â”‚ â”‚
â”‚  â”‚ğŸ“templatesâ”‚    â”‚  â”‚        å‚æ•°è¾“å…¥åŒº           â”‚  â”‚  â”‚        â”‚ â”‚
â”‚  â”‚  ğŸ“„main.j2â”‚    â”‚  â”‚                             â”‚  â”‚  â”‚â˜‘ä¸»ç¨‹åº â”‚ â”‚
â”‚  â”‚  ğŸ“„sub.j2 â”‚    â”‚  â”‚  ç¨‹åºå: [TEST001        ]  â”‚  â”‚  â”‚â˜å­ç¨‹åº â”‚ â”‚
â”‚  â”‚ğŸ“„package  â”‚    â”‚  â”‚  åˆ€å…·å·: [1               ]  â”‚  â”‚  â”‚â˜åˆ€å…·åˆ—è¡¨â”‚ â”‚
â”‚  â”‚  .yaml    â”‚    â”‚  â”‚  è½¬é€Ÿ:   [3000        ]rpm â”‚  â”‚  â”‚        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç•Œé¢åŠŸèƒ½åˆ†åŒº

#### 1. é¡¶éƒ¨å·¥å…·æ 
- æ–°å»ºæ¨¡æ¿åŒ…
- å¯¼å…¥æ¨¡æ¿åŒ…
- å¯¼å‡ºæ¨¡æ¿åŒ…
- ä¿å­˜å½“å‰å·¥ä½œ
- é¢„è§ˆæ¸²æŸ“ç»“æœ
- å¯¼å‡ºæ–‡ä»¶

#### 2. å·¦ä¾§é¢æ¿
- **æ¨¡æ¿åŒ…åˆ—è¡¨**ï¼šæ˜¾ç¤ºæ‰€æœ‰å¯ç”¨æ¨¡æ¿åŒ…
- **æ–‡ä»¶æ ‘**ï¼šæ˜¾ç¤ºå½“å‰æ¨¡æ¿åŒ…çš„æ–‡ä»¶ç»“æ„
- **æœç´¢æ¡†**ï¼šå¿«é€Ÿæœç´¢æ¨¡æ¿åŒ…å’Œæ–‡ä»¶

#### 3. ä¸­é—´å·¥ä½œåŒº
- **ç¼–è¾‘å™¨æ ‡ç­¾é¡µ**ï¼šæ¨¡æ¿ç¼–è¾‘ã€é…ç½®ç¼–è¾‘
- **é¢„è§ˆæ ‡ç­¾é¡µ**ï¼šå®æ—¶é¢„è§ˆæ¸²æŸ“ç»“æœ
- **å‚æ•°è¾“å…¥æ ‡ç­¾é¡µ**ï¼šå‚æ•°é…ç½®ç•Œé¢

#### 4. å³ä¾§é¢æ¿
- **å‚æ•°é¢æ¿**ï¼šæ˜¾ç¤ºå’Œç¼–è¾‘å‚æ•°
- **è¾“å‡ºé¢æ¿**ï¼šé€‰æ‹©è¾“å‡ºæ–‡ä»¶
- **å±æ€§é¢æ¿**ï¼šæ˜¾ç¤ºå½“å‰é€‰ä¸­é¡¹çš„å±æ€§

## ğŸ”„ å·¥ä½œæµç¨‹

### æ¨¡æ¿åŒ…åˆ›å»ºæµç¨‹
```
1. ç‚¹å‡»"æ–°å»ºæ¨¡æ¿åŒ…"
   â†“
2. å¡«å†™åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€ç‰ˆæœ¬ã€æè¿°ç­‰ï¼‰
   â†“
3. åˆ›å»ºæ¨¡æ¿åŒ…ç›®å½•ç»“æ„
   â†“
4. ç”Ÿæˆpackage.yamlé…ç½®æ–‡ä»¶
   â†“
5. åˆ›å»ºé»˜è®¤æ¨¡æ¿æ–‡ä»¶
   â†“
6. æ‰“å¼€ç¼–è¾‘å™¨è¿›è¡Œç¼–è¾‘
```

### æ¨¡æ¿åŒ…ä½¿ç”¨æµç¨‹
```
1. ä»æ¨¡æ¿åŒ…åˆ—è¡¨é€‰æ‹©æ¨¡æ¿åŒ…
   â†“
2. ç³»ç»ŸåŠ è½½æ¨¡æ¿åŒ…é…ç½®å’Œå‚æ•°å®šä¹‰
   â†“
3. ç”¨æˆ·åœ¨å‚æ•°é¢æ¿å¡«å†™å‚æ•°å€¼
   â†“
4. å®æ—¶éªŒè¯å‚æ•°æœ‰æ•ˆæ€§
   â†“
5. ç”¨æˆ·é€‰æ‹©è¦è¾“å‡ºçš„æ–‡ä»¶
   â†“
6. ç‚¹å‡»"æ¸²æŸ“"ç”Ÿæˆç»“æœ
   â†“
7. é¢„è§ˆæ¸²æŸ“ç»“æœ
   â†“
8. å¯¼å‡ºæ–‡ä»¶åˆ°æŒ‡å®šç›®å½•
```

### æ¨¡æ¿ç¼–è¾‘æµç¨‹
```
1. åœ¨æ–‡ä»¶æ ‘ä¸­é€‰æ‹©è¦ç¼–è¾‘çš„æ–‡ä»¶
   â†“
2. åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€æ–‡ä»¶
   â†“
3. ç¼–è¾‘æ–‡ä»¶å†…å®¹ï¼ˆè¯­æ³•é«˜äº®ã€æ™ºèƒ½æç¤ºï¼‰
   â†“
4. å®æ—¶é¢„è§ˆæ¸²æŸ“ç»“æœ
   â†“
5. ä¿å­˜æ–‡ä»¶æ›´æ”¹
   â†“
6. æ›´æ–°ç›¸å…³é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰
```

## ğŸ“Š æ•°æ®æ¨¡å‹

### æ ¸å¿ƒå®ä½“

#### TemplatePackageï¼ˆæ¨¡æ¿åŒ…ï¼‰
```python
class TemplatePackage:
    id: str                  # å”¯ä¸€æ ‡è¯†
    name: str                # åŒ…å
    display_name: str        # æ˜¾ç¤ºå
    version: str             # ç‰ˆæœ¬å·
    description: str         # æè¿°
    category: str            # åˆ†ç±»
    tags: List[str]          # æ ‡ç­¾
    author: str              # ä½œè€…
    icon: str                # å›¾æ ‡
    color: str               # ä¸»é¢˜è‰²
    config_path: str         # é…ç½®æ–‡ä»¶è·¯å¾„
    templates_path: str      # æ¨¡æ¿ç›®å½•è·¯å¾„
    created_at: datetime     # åˆ›å»ºæ—¶é—´
    updated_at: datetime     # æ›´æ–°æ—¶é—´
```

#### Parameterï¼ˆå‚æ•°ï¼‰
```python
class Parameter:
    name: str                # å‚æ•°å
    type: str                # å‚æ•°ç±»å‹
    label: str               # æ˜¾ç¤ºæ ‡ç­¾
    description: str         # æè¿°
    default_value: any       # é»˜è®¤å€¼
    required: bool           # æ˜¯å¦å¿…å¡«
    unit: str                # å•ä½
    range: Tuple[any, any]    # å–å€¼èŒƒå›´
    options: List[any]       # é€‰é¡¹åˆ—è¡¨
    validation_rules: List[ValidationRule]  # éªŒè¯è§„åˆ™
```

#### OutputFileï¼ˆè¾“å‡ºæ–‡ä»¶ï¼‰
```python
class OutputFile:
    name: str                # è¾“å‡ºæ–‡ä»¶å
    template_path: str       # æ¨¡æ¿æ–‡ä»¶è·¯å¾„
    filename_pattern: str    # æ–‡ä»¶åæ¨¡å¼
    extension: str           # æ–‡ä»¶åç¼€
    description: str         # æè¿°
    enabled: bool            # æ˜¯å¦å¯ç”¨
    is_default: bool         # æ˜¯å¦é»˜è®¤
```

### é…ç½®æ–‡ä»¶ç»“æ„

#### package.yaml å®Œæ•´ç»“æ„
```yaml
# åŸºæœ¬ä¿¡æ¯ï¼ˆå¿…éœ€ï¼‰
package:
  name: string
  displayName: string
  version: string
  description: string
  category: string
  tags: list[string]
  author: string
  icon: string
  color: string
  language: string

# ä¾èµ–å…³ç³»ï¼ˆå¯é€‰ï¼‰
dependencies: list[string]

# æ¨¡æ¿é…ç½®ï¼ˆå¿…éœ€ï¼‰
templates:
  main: string

# å˜é‡å®šä¹‰ï¼ˆå¿…éœ€ï¼‰
variables:
  groups:
    group_name:
      name: string
      icon: string
      description: string
      parameters:
        param_name:
          type: string
          label: string
          description: string
          default: any
          required: boolean
          unit: string
          range: list[any]
          options: list[any]
          validation: dict

# è¾“å‡ºé…ç½®ï¼ˆå¿…éœ€ï¼‰
outputs:
  default_format: string
  supported_formats: list[string]
  files:
    output_name:
      template: string
      filename_pattern: string
      extension: string
      description: string
      enabled: boolean
      is_default: boolean

# é¢„è®¾é…ç½®ï¼ˆå¯é€‰ï¼‰
presets:
  preset_name:
    description: string
    parameters: dict

# éªŒè¯é…ç½®ï¼ˆå¯é€‰ï¼‰
validation:
  rules:
    rule_name:
      condition: string
      message: string
      level: string
```

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### å‰ç«¯æŠ€æœ¯æ ˆ

#### Vue.js 3 ç»„ä»¶æ¶æ„
```typescript
// ä¸»åº”ç”¨ç»„ä»¶
App.vue
â”œâ”€â”€ HeaderBar.vue          # é¡¶éƒ¨å·¥å…·æ 
â”œâ”€â”€ MainLayout.vue         # ä¸»å¸ƒå±€
â”‚   â”œâ”€â”€ TemplateList.vue   # æ¨¡æ¿åŒ…åˆ—è¡¨
â”‚   â”œâ”€â”€ FileTree.vue       # æ–‡ä»¶æ ‘
â”‚   â”œâ”€â”€ EditorTabs.vue     # ç¼–è¾‘å™¨æ ‡ç­¾é¡µ
â”‚   â”œâ”€â”€ ParameterPanel.vue # å‚æ•°é¢æ¿
â”‚   â””â”€â”€ OutputPanel.vue    # è¾“å‡ºé¢æ¿
â””â”€â”€ StatusBar.vue          # çŠ¶æ€æ 
```

#### çŠ¶æ€ç®¡ç† (Pinia)
```typescript
// æ¨¡æ¿åŒ…çŠ¶æ€
export const useTemplateStore = defineStore('template', {
  state: () => ({
    packages: [] as TemplatePackage[],
    currentPackage: null as TemplatePackage | null,
    loading: false,
    error: null as string | null
  }),
  actions: {
    async loadPackages(): Promise<void>
    async selectPackage(id: string): Promise<void>
    async importPackage(file: File): Promise<void>
    async exportPackage(id: string): Promise<void>
  }
})

// å‚æ•°çŠ¶æ€
export const useParameterStore = defineStore('parameter', {
  state: () => ({
    parameters: {} as Record<string, any>,
    validation: {} as ValidationResult,
    presets: [] as ParameterPreset[],
    currentPreset: null as string | null
  }),
  actions: {
    async loadParameters(packageId: string): Promise<void>
    async validateParameters(packageId: string, params: Record<string, any>): Promise<ValidationResult>
    async savePreset(name: string, params: Record<string, any>): Promise<void>
    async loadPreset(presetId: string): Promise<void>
  }
})

// ç¼–è¾‘å™¨çŠ¶æ€
export const useEditorStore = defineStore('editor', {
  state: () => ({
    currentFile: null as FileItem | null,
    openTabs: [] as FileItem[],
    activeTab: null as string | null,
    previewContent: '',
    renderErrors: [] as string[]
  }),
  actions: {
    async openFile(path: string): Promise<void>
    async saveFile(path: string, content: string): Promise<void>
    async closeFile(path: string): Promise<void>
    async renderPreview(): Promise<void>
  }
})
```

#### Monaco Editor é›†æˆ
```typescript
// ç¼–è¾‘å™¨é…ç½®
const editorOptions = {
  language: 'jinja2',
  theme: 'vs-dark',
  automaticLayout: true,
  minimap: { enabled: true },
  lineNumbers: 'on',
  wordWrap: 'on',
  folding: true,
  fontSize: 14,
  tabSize: 2
}

// Jinja2 è¯­æ³•é«˜äº®é…ç½®
monaco.languages.register({ id: 'jinja2' })
monaco.languages.setMonarchTokensProvider('jinja2', {
  tokenizer: {
    root: [
      [/\{\{.*?\}\}/, 'variable'],
      [/\{%.*?%\}/, 'keyword'],
      [/\{#.*?#\}/, 'comment'],
      [/G\d+/, 'function'],           // Gä»£ç 
      [/M\d+/, 'function'],           // Mä»£ç 
      [/X\d+/, 'number'],            // Xåæ ‡
      [/Y\d+/, 'number'],            // Yåæ ‡
      [/Z\d+/, 'number'],            // Zåæ ‡
      [/F\d+/, 'number'],            // è¿›ç»™é€Ÿåº¦
      [/S\d+/, 'number'],            // ä¸»è½´è½¬é€Ÿ
    ]
  }
})
```

### åç«¯æŠ€æœ¯æ ˆ

#### Flask åº”ç”¨ç»“æ„
```python
# app.py
from flask import Flask, request, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)

# è“å›¾æ³¨å†Œ
from controllers.template_controller import template_bp
from controllers.parameter_controller import parameter_bp
from controllers.editor_controller import editor_bp
from controllers.file_controller import file_bp

app.register_blueprint(template_bp, url_prefix='/api/templates')
app.register_blueprint(parameter_bp, url_prefix='/api/parameters')
app.register_blueprint(editor_bp, url_prefix='/api/editor')
app.register_blueprint(file_bp, url_prefix='/api/files')

if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0', port=5000)
```

#### æœåŠ¡å±‚æ¶æ„
```python
# services/template_service.py
class TemplateService:
    def __init__(self):
        self.template_manager = TemplateManager()
        self.file_manager = FileManager()
    
    async def get_all_packages(self) -> List[TemplatePackage]:
        """è·å–æ‰€æœ‰æ¨¡æ¿åŒ…"""
        return self.template_manager.scan_packages()
    
    async def get_package_by_id(self, package_id: str) -> TemplatePackage:
        """æ ¹æ®IDè·å–æ¨¡æ¿åŒ…"""
        return self.template_manager.get_package(package_id)
    
    async def import_package(self, file_data: bytes) -> TemplatePackage:
        """å¯¼å…¥æ¨¡æ¿åŒ…"""
        # ä¿å­˜ä¸´æ—¶æ–‡ä»¶
        temp_path = self.file_manager.save_temp_file(file_data)
        # è§£å‹å¹¶éªŒè¯
        package_path = self.template_manager.extract_package(temp_path)
        # éªŒè¯é…ç½®
        self.template_manager.validate_package(package_path)
        # ç§»åŠ¨åˆ°packagesç›®å½•
        final_path = self.template_manager.install_package(package_path)
        return TemplatePackage(final_path)

# services/parameter_service.py
class ParameterService:
    def __init__(self):
        self.validator = ParameterValidator()
    
    async def get_parameters(self, package_id: str) -> dict:
        """è·å–å‚æ•°å®šä¹‰"""
        package = self.template_manager.get_package(package_id)
        return package.variables_config
    
    async def validate_parameters(self, package_id: str, parameters: dict) -> ValidationResult:
        """éªŒè¯å‚æ•°å€¼"""
        config = await self.get_parameters(package_id)
        return self.validator.validate(parameters, config)
    
    async def calculate_derived_parameters(self, parameters: dict, config: dict) -> dict:
        """è®¡ç®—æ´¾ç”Ÿå‚æ•°"""
        calculator = ParameterCalculator()
        return calculator.calculate(parameters, config)

# services/render_service.py
class RenderService:
    def __init__(self):
        self.render_engine = RenderEngine()
        self.parameter_service = ParameterService()
    
    async def render_package(self, package_id: str, parameters: dict) -> RenderResult:
        """æ¸²æŸ“æ¨¡æ¿åŒ…"""
        # éªŒè¯å‚æ•°
        validation = await self.parameter_service.validate_parameters(package_id, parameters)
        if validation.errors:
            raise ValidationError(validation.errors)
        
        # è®¡ç®—æ´¾ç”Ÿå‚æ•°
        config = await self.parameter_service.get_parameters(package_id)
        derived_params = await self.parameter_service.calculate_derived_parameters(parameters, config)
        all_params = {**parameters, **derived_params}
        
        # æ¸²æŸ“æ¨¡æ¿
        package = self.template_manager.get_package(package_id)
        return self.render_engine.render_package(package, all_params)
```

#### Jinja2 æ¸²æŸ“å¼•æ“
```python
# utils/jinja_renderer.py
from jinja2 import Environment, FileSystemLoader
import math

class RenderEngine:
    def __init__(self):
        self.env = Environment(
            loader=FileSystemLoader('.'),
            extensions=['jinja2.ext.do'],
            autoescape=False,
            trim_blocks=True,
            lstrip_blocks=True
        )
        self._setup_filters()
        self._setup_globals()
    
    def render_package(self, package: TemplatePackage, parameters: dict) -> dict:
        """æ¸²æŸ“æ¨¡æ¿åŒ…çš„æ‰€æœ‰è¾“å‡ºæ–‡ä»¶"""
        results = {}
        outputs_config = package.outputs_config
        
        for output_name, output_config in outputs_config["files"].items():
            if not output_config.get("enabled", True):
                continue
            
            # æ¸²æŸ“æ¨¡æ¿
            template_path = package.path / output_config["template"]
            content = self._render_template(str(template_path), parameters)
            
            # ç”Ÿæˆæ–‡ä»¶å
            filename = self._generate_filename(
                output_config["filename_pattern"],
                parameters
            )
            extension = output_config["extension"]
            
            results[output_name] = {
                "filename": filename + extension,
                "content": content,
                "description": output_config["description"]
            }
        
        return results
    
    def _render_template(self, template_path: str, parameters: dict) -> str:
        """æ¸²æŸ“å•ä¸ªæ¨¡æ¿"""
        template = self.env.get_template(template_path)
        return template.render(**parameters)
    
    def _generate_filename(self, pattern: str, parameters: dict) -> str:
        """ç”Ÿæˆæ–‡ä»¶å"""
        template = self.env.from_string(pattern)
        return template.render(**parameters)
    
    def _setup_filters(self):
        """è®¾ç½®è‡ªå®šä¹‰è¿‡æ»¤å™¨"""
        self.env.filters['round'] = lambda x, digits=2: round(float(x), digits)
        self.env.filters['format'] = lambda x, fmt: format(x, fmt)
        self.env.filters['abs'] = abs
        self.env.filters['min'] = min
        self.env.filters['max'] = max
        self.env.filters['sin'] = lambda x: math.sin(math.radians(x))
        self.env.filters['cos'] = lambda x: math.cos(math.radians(x))
        self.env.filters['tan'] = lambda x: math.tan(math.radians(x))
        self.env.filters['sqrt'] = math.sqrt
    
    def _setup_globals(self):
        """è®¾ç½®å…¨å±€å‡½æ•°"""
        self.env.globals['sin'] = lambda x: math.sin(math.radians(x))
        self.env.globals['cos'] = lambda x: math.cos(math.radians(x))
        self.env.globals['sqrt'] = math.sqrt
        self.env.globals['abs'] = abs
        self.env.globals['min'] = min
        self.env.globals['max'] = max
        self.env.globals['range'] = range
        self.env.globals['len'] = len
```

## ğŸ“‹ é¡¹ç›®è¾¹ç•Œå’Œçº¦æŸ

### åŠŸèƒ½è¾¹ç•Œ
#### åŒ…å«çš„åŠŸèƒ½
- âœ… æ¨¡æ¿åŒ…çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†
- âœ… åŸºäºYAMLçš„é…ç½®ç³»ç»Ÿ
- âœ… å¼ºå¤§çš„å‚æ•°ç®¡ç†å’ŒéªŒè¯
- âœ… ä¸“ä¸šçš„ä»£ç ç¼–è¾‘å™¨
- âœ… å®æ—¶é¢„è§ˆå’Œæ¸²æŸ“
- âœ… å¤šæ ¼å¼æ–‡ä»¶è¾“å‡º
- âœ… æ–‡ä»¶ç®¡ç†å’Œå¤‡ä»½

#### ä¸åŒ…å«çš„åŠŸèƒ½
- âŒ Gä»£ç è¯­æ³•éªŒè¯å’Œä»¿çœŸ
- âŒ åˆ€è·¯è½¨è¿¹è®¡ç®—å’Œä¼˜åŒ–
- âŒ æœºåºŠåå¤„ç†å™¨
- âŒ CAD/CAMé›†æˆ
- âŒ ç½‘ç»œåä½œå’Œç‰ˆæœ¬æ§åˆ¶
- âŒ æ•°æ®åº“æŒä¹…åŒ–ï¼ˆä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿï¼‰
- âŒ ç”¨æˆ·æƒé™ç®¡ç†

### æŠ€æœ¯çº¦æŸ
#### å¿…é¡»ä½¿ç”¨çš„æŠ€æœ¯
- å‰ç«¯ï¼šVue.js 3 + TypeScript
- åç«¯ï¼šPython Flask
- æ¨¡æ¿å¼•æ“ï¼šJinja2
- é…ç½®æ ¼å¼ï¼šYAML
- ç¼–è¾‘å™¨ï¼šMonaco Editor

#### æ–‡ä»¶æ ¼å¼çº¦æŸ
- æ¨¡æ¿æ–‡ä»¶ï¼šå¿…é¡»ä½¿ç”¨.j2åç¼€
- é…ç½®æ–‡ä»¶ï¼šå¿…é¡»ä½¿ç”¨package.yaml
- å¯¼å‡ºæ ¼å¼ï¼šæ”¯æŒ.nc, .mpf, .spf, .txt, .html

#### æ¥å£çº¦æŸ
- æ‰€æœ‰APIå¿…é¡»ä½¿ç”¨RESTfulé£æ ¼
- å“åº”æ ¼å¼å¿…é¡»ä½¿ç”¨JSON
- é”™è¯¯å¤„ç†å¿…é¡»ä½¿ç”¨æ ‡å‡†HTTPçŠ¶æ€ç 

### æ€§èƒ½çº¦æŸ
- æ¨¡æ¿åŒ…æ•°é‡ï¼šæ”¯æŒæœ€å¤š1000ä¸ªæ¨¡æ¿åŒ…
- å•ä¸ªæ¨¡æ¿åŒ…å¤§å°ï¼šä¸è¶…è¿‡10MB
- æ¸²æŸ“å“åº”æ—¶é—´ï¼šå•ä¸ªæ–‡ä»¶æ¸²æŸ“ä¸è¶…è¿‡2ç§’
- å¹¶å‘ç”¨æˆ·ï¼šæ”¯æŒæœ€å¤š10ä¸ªå¹¶å‘ç”¨æˆ·

### å…¼å®¹æ€§çº¦æŸ
- æµè§ˆå™¨æ”¯æŒï¼šChrome 90+, Firefox 88+, Safari 14+
- Pythonç‰ˆæœ¬ï¼š3.8+
- æ“ä½œç³»ç»Ÿï¼šWindows 10+, macOS 10.15+, Linux (Ubuntu 18.04+)

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- å‰ç«¯ç»„ä»¶æµ‹è¯•ï¼šVue Test Utils
- åç«¯æœåŠ¡æµ‹è¯•ï¼špytest
- æ¨¡æ¿æ¸²æŸ“æµ‹è¯•ï¼šJinja2æ¨¡æ¿æµ‹è¯•
- å‚æ•°éªŒè¯æµ‹è¯•ï¼šè¾¹ç•Œå€¼å’Œå¼‚å¸¸æƒ…å†µæµ‹è¯•

### é›†æˆæµ‹è¯•
- APIæ¥å£æµ‹è¯•ï¼šPostman/Newman
- å‰åç«¯é›†æˆæµ‹è¯•ï¼šç«¯åˆ°ç«¯æµ‹è¯•
- æ–‡ä»¶æ“ä½œæµ‹è¯•ï¼šæ–‡ä»¶ä¸Šä¼ ä¸‹è½½æµ‹è¯•

### ç”¨æˆ·æµ‹è¯•
- ç•Œé¢å¯ç”¨æ€§æµ‹è¯•
- å·¥ä½œæµç¨‹æµ‹è¯•
- æ€§èƒ½å‹åŠ›æµ‹è¯•

## ğŸ“š éƒ¨ç½²å’Œç»´æŠ¤

### éƒ¨ç½²æ–¹æ¡ˆ
- å¼€å‘ç¯å¢ƒï¼šæœ¬åœ°è¿è¡Œ
- æµ‹è¯•ç¯å¢ƒï¼šDockerå®¹å™¨
- ç”Ÿäº§ç¯å¢ƒï¼šå•æœºéƒ¨ç½²

### æ•°æ®å¤‡ä»½
- æ¨¡æ¿åŒ…å®šæœŸå¤‡ä»½
- é…ç½®æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶
- ç”¨æˆ·æ•°æ®å¯¼å‡ºåŠŸèƒ½

### ç»´æŠ¤è®¡åˆ’
- å®šæœŸæ›´æ–°ä¾èµ–åº“
- æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–
- ç”¨æˆ·åé¦ˆæ”¶é›†å’Œå¤„ç†

---

## ğŸ“ æ–‡æ¡£çº¦æŸè¯´æ˜

æœ¬æ–‡æ¡£ä½œä¸ºé¡¹ç›®çš„**å”¯ä¸€æƒå¨éœ€æ±‚è§„èŒƒ**ï¼Œå…·æœ‰ä»¥ä¸‹çº¦æŸåŠ›ï¼š

### å¼€å‘çº¦æŸ
1. **åŠŸèƒ½èŒƒå›´**ï¼šæ‰€æœ‰å¼€å‘åŠŸèƒ½å¿…é¡»ä¸¥æ ¼åœ¨æœ¬æ–‡æ¡£å®šä¹‰çš„èŒƒå›´å†…
2. **æŠ€æœ¯é€‰å‹**ï¼šå¿…é¡»ä½¿ç”¨æœ¬æ–‡æ¡£æŒ‡å®šçš„æŠ€æœ¯æ ˆå’Œå·¥å…·
3. **æ¥å£è§„èŒƒ**ï¼šAPIæ¥å£å¿…é¡»ç¬¦åˆæœ¬æ–‡æ¡£çš„å®šä¹‰
4. **æ•°æ®æ ¼å¼**ï¼šæ‰€æœ‰æ•°æ®æ ¼å¼å¿…é¡»éµå¾ªæœ¬æ–‡æ¡£çš„è§„èŒƒ

### å˜æ›´ç®¡ç†
1. **éœ€æ±‚å˜æ›´**ï¼šä»»ä½•éœ€æ±‚å˜æ›´å¿…é¡»å…ˆæ›´æ–°æœ¬æ–‡æ¡£
2. **è®¾è®¡å˜æ›´**ï¼šè®¾è®¡å˜æ›´ä¸èƒ½è¶…å‡ºæœ¬æ–‡æ¡£çš„èŒƒå›´
3. **å®ç°å˜æ›´**ï¼šä»£ç å®ç°ä¸èƒ½åç¦»æœ¬æ–‡æ¡£çš„å®šä¹‰

### éªŒæ”¶æ ‡å‡†
1. **åŠŸèƒ½éªŒæ”¶**ï¼šä»¥æœ¬æ–‡æ¡£çš„åŠŸèƒ½æè¿°ä¸ºéªŒæ”¶æ ‡å‡†
2. **è´¨é‡éªŒæ”¶**ï¼šä»¥æœ¬æ–‡æ¡£çš„æ€§èƒ½å’Œå…¼å®¹æ€§çº¦æŸä¸ºæ ‡å‡†
3. **æ–‡æ¡£éªŒæ”¶**ï¼šæ‰€æœ‰æŠ€æœ¯æ–‡æ¡£å¿…é¡»ä¸æœ¬æ–‡æ¡£ä¿æŒä¸€è‡´

### è¿è§„å¤„ç†
1. **è¶…å‡ºèŒƒå›´**ï¼šä»»ä½•è¶…å‡ºæœ¬æ–‡æ¡£èŒƒå›´çš„åŠŸèƒ½éƒ½éœ€è¦é‡æ–°è¯„ä¼°
2. **åç¦»è§„èŒƒ**ï¼šä»£ç å®ç°åç¦»æœ¬æ–‡æ¡£è§„èŒƒå¿…é¡»ä¿®æ­£
3. **æ–‡æ¡£è¿‡æ—¶**ï¼šæœ¬æ–‡æ¡£è¿‡æ—¶å¿…é¡»ç«‹å³æ›´æ–°

**æœ¬æ–‡æ¡£ç‰ˆæœ¬ï¼š1.0.0**
**æœ€åæ›´æ–°ï¼š2026-01-14**
**ä¸‹æ¬¡å®¡æŸ¥ï¼š2026-02-14**

---

*æ­¤æ–‡æ¡£ä¸ºæ¨¡æ¿é©±åŠ¨çš„æ•°æ§ç¨‹åºç”Ÿæˆå™¨é¡¹ç›®çš„å®Œæ•´éœ€æ±‚è§„èŒƒï¼Œæ‰€æœ‰å¼€å‘æ´»åŠ¨å¿…é¡»ä¸¥æ ¼éµå¾ªæœ¬æ–‡æ¡£çš„çº¦æŸå’Œå®šä¹‰ã€‚*
